<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_saledetails_excluded_section" inherit_id="point_of_sale.pos_session_sales_details">

        <!-- Insert the Payouts/Adjustments section before the closing session section -->
        <xpath expr="//t[@id='closing_session']" position="before">
            <t t-if="excluded_ops">
                <div class="oe_structure"></div>
                <div id="excluded_operations" style="page-break-inside: avoid;">
                    <h6 class="bg-secondary p-1 fw-bold">Payouts &amp; Adjustments (Non-Revenue)</h6>
                    <table class="table table-sm table-borderless">
                        <thead>
                            <tr>
                                <th>Group</th>
                                <th class="text-end">Quantity</th>
                                <th class="text-end">Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="excluded_ops" t-as="line" class="border-bottom border-secondary">
                                <td class="ps-2">
                                    <span t-out="line['product_name']"/>
                                </td>
                                <td class="text-end">
                                    <span t-out="line['quantity']"/>
                                    <t t-if="line.get('uom') and line['uom'] != 'Units'">
                                        <span t-out="line['uom']"/>
                                    </t>
                                </td>
                                <td class="text-end">
                                    <t t-if="currency['position']">
                                        <span t-out="line['base_amount']" t-options="{'widget': 'float', 'precision': currency['precision']}"/><span t-out="currency['symbol']"/>
                                    </t>
                                    <t t-else="">
                                        <span t-out="currency['symbol']"/><span t-out="line['base_amount']" t-options="{'widget': 'float', 'precision': currency['precision']}"/>
                                    </t>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="oe_structure"></div>
            </t>
        </xpath>

    </template>
</odoo>
